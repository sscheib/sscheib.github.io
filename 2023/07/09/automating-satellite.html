<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Automating Red Hat Satellite 6 - End to End | Steffen’s random thoughts</title>
<meta name="generator" content="Jekyll v3.9.5">
<meta property="og:title" content="Automating Red Hat Satellite 6 - End to End">
<meta name="author" content="Steffen Scheib">
<meta property="og:locale" content="en_US">
<meta name="description" content="This my personal blog, where I post about things that I do and find interesting. All posts and thoughts on this blog are solely my opinion and are not related to my employer.">
<meta property="og:description" content="This my personal blog, where I post about things that I do and find interesting. All posts and thoughts on this blog are solely my opinion and are not related to my employer.">
<link rel="canonical" href="https://blog.scheib.me/2023/07/09/automating-satellite.html">
<meta property="og:url" content="https://blog.scheib.me/2023/07/09/automating-satellite.html">
<meta property="og:site_name" content="Steffen’s random thoughts">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-07-09T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Automating Red Hat Satellite 6 - End to End">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Steffen Scheib"},"dateModified":"2024-03-17T00:00:00+00:00","datePublished":"2023-07-09T00:00:00+00:00","description":"This my personal blog, where I post about things that I do and find interesting. All posts and thoughts on this blog are solely my opinion and are not related to my employer.","headline":"Automating Red Hat Satellite 6 - End to End","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.scheib.me/2023/07/09/automating-satellite.html"},"url":"https://blog.scheib.me/2023/07/09/automating-satellite.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
<link type="application/atom+xml" rel="alternate" href="https://blog.scheib.me/feed.xml" title="Steffen's random thoughts">
</head>
<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/">Steffen's random thoughts</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">/about</a></div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Automating Red Hat Satellite 6 - End to End</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-07-09T00:00:00+00:00" itemprop="datePublished">Published: Jul 9, 2023
      </time>
      <time class="dt-modified" datetime="2024-03-17T00:00:00+00:00" itemprop="dateModified">• Last modified: Mar 17, 2024
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Steffen Scheib </span></span>• <span itemprop="readingTime" itemscope><span class="h-card" itemprop="readingTime">

57 minutes to read
</span></span></p>
  </header>

  <div class="toc">
    <h2>Table of contents</h2>
    <ul>
<li><a href="#preface">Preface</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li>
<a href="#install-satellite-server">Install Satellite server</a><ul>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks">Roles, variables files and playbooks</a></li>
<li><a href="#procedure">Procedure</a></li>
</ul>
</li>
<li>
<a href="#prepare-satellite-for-ansible-access">Prepare Satellite for Ansible access</a><ul><li><a href="#procedure-1">Procedure</a></li></ul>
</li>
<li>
<a href="#registering-the-system-to-the-red-hat-customer-portal-and-installing-red-hat-satellite">Registering the system to the Red Hat Customer Portal and installing Red Hat Satellite</a><ul>
<li><a href="#documentation-1">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-1">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-2">Procedure</a></li>
</ul>
</li>
<li>
<a href="#define-general-variables">Define general variables</a><ul>
<li><a href="#documentation-2">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-2">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-3">Procedure</a></li>
</ul>
</li>
<li>
<a href="#optional-configure-satellites-cloud-connector"><em>Optional</em>: Configure Satellite’s Cloud Connector</a><ul>
<li><a href="#documentation-3">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-3">Roles, variables files and playbooks</a></li>
</ul>
</li>
<li>
<a href="#importing-a-manifest">Importing a Manifest</a><ul>
<li><a href="#documentation-4">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-4">Roles, variables files and playbooks</a></li>
</ul>
</li>
<li>
<a href="#creating-content-credentials-for-custom-products">Creating Content Credentials for custom Products</a><ul>
<li><a href="#documentation-5">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-5">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-4">Procedure</a></li>
</ul>
</li>
<li>
<a href="#enabling-red-hat-repositories-creating-custom-products-and-repositories-and-synchronize-the-repositories">Enabling Red Hat Repositories, creating custom Products and Repositories and synchronize the Repositories</a><ul>
<li><a href="#documentation-6">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-6">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-5">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-sync-plans">Create Sync Plans</a><ul>
<li><a href="#documentation-7">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-7">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-6">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-lifecycle-environments">Create Lifecycle Environments</a><ul>
<li><a href="#documentation-8">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-8">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-7">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-domains">Create Domains</a><ul>
<li><a href="#documentation-9">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-9">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-8">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-subnets">Create Subnets</a><ul>
<li><a href="#documentation-10">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-10">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-9">Procedure</a></li>
</ul>
</li>
<li>
<a href="#define-the-composite-content-views-and-publish-and-promote-them">Define the (Composite) Content Views and publish and promote them</a><ul>
<li><a href="#documentation-11">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-11">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-10">Procedure</a></li>
</ul>
</li>
<li>
<a href="#apply-satellite-settings-and-enable-template-synchronization">Apply Satellite settings and enable Template Synchronization</a><ul>
<li><a href="#documentation-12">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-12">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-11">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-operating-systems">Create Operating Systems</a><ul>
<li><a href="#documentation-13">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-13">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-12">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-activation-keys">Create Activation Keys</a><ul>
<li><a href="#documentation-14">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-14">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-13">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-host-groups">Create Host Groups</a><ul>
<li><a href="#documentation-15">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-15">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-14">Procedure</a></li>
</ul>
</li>
<li>
<a href="#create-global-parameters">Create Global Parameters</a><ul>
<li><a href="#documentation-16">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-16">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-15">Procedure</a></li>
</ul>
</li>
<li>
<a href="#optional-enable-and-import-openscap-content"><em>Optional:</em> Enable and import OpenSCAP content</a><ul>
<li><a href="#documentation-17">Documentation</a></li>
<li><a href="#roles-variables-files-and-playbooks-17">Roles, variables files and playbooks</a></li>
<li><a href="#procedure-16">Procedure</a></li>
</ul>
</li>
<li><a href="#closing-thoughts">Closing thoughts</a></li>
<li>
<a href="#change-log">Change log</a><ul>
<li><a href="#2025-01-23">2025-01-23</a></li>
<li><a href="#2024-03-17">2024-03-17</a></li>
<li><a href="#2024-03-11">2024-03-11</a></li>
<li><a href="#2024-03-09">2024-03-09</a></li>
</ul>
</li>
<li><a href="#footnotes">Footnotes</a></li>
</ul>
  </div>
  <div class="post-content e-content" itemprop="articleBody">
    <!-- markdownlint-disable MD033 -->

<style>
table th:first-of-type {
    width: 7%;
}
table th:nth-of-type(2) {
    width: 94%;
}
</style>

<!-- markdownlint-enable MD033 -->
<h2 id="preface">
  
  
    Preface <a href="#preface">#</a>
  
  
</h2>
    

<p>This blog post does not follow the style of my previous blog posts. It is more or less a step by step manual on how to use
<a href="https://github.com/sscheib/ansible_satellite">my repository on GitHub</a> to automate Red Hat Satellite using Ansible.</p>

<p>Further, a good understanding of Satellite and, more importantly, a good understanding of the concepts around Ansible is <strong>required</strong>.
Especially <a href="https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_variables.html#understanding-variable-precedence">variable precedence</a> should be well known.
Don’t get me wrong, it is still a step by step guide, but nevertheless, if you want to adjust this step by step guide to <em>your</em> infrastructure (which is likely that you’d
want to do that <img class="emoji" title=":grin:" alt=":grin:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png" height="20" width="20">), you <strong>need</strong> to understand the concepts around Ansible.</p>

<p>All variables we define are either <a href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#organizing-host-and-group-variables">host or group variables</a>.
This has the benefit that your inventory is not cluttered with variables, and additionally, this allows you to create different variables for each of your Satellite instances
(if you have multiple). I use group variables only for variables that are required by all my Satellite instances.</p>

<p>Please note, only a fraction of the available variables are used for each role. Please make sure to check out each section’s documentation of the respective role for a
complete list of available variables. Further, relevant documentation is also linked in each section that complements the respective steps that are done in Ansible if
you’d like to know more about the general (manual) procedure.</p>

<p>In below sections I make heavy use of <a href="https://docs.github.com/en/get-started/writing-on-github/editing-and-sharing-content-with-gists/creating-gists#about-gists">GitHub <code class="language-plaintext highlighter-rouge">gists</code></a>
to show <strong>my personal configuration</strong> of the respective roles. You <strong>need to modify every gist so that it works for your environment</strong>. For this purpose, I
documented (almost) every variable in the <code class="language-plaintext highlighter-rouge">gists</code> to ensure the usage is clear. Should something be not clear, please refer to the role documentation (that is linked in every
section), which provides additional context as well as possibly other variables to use that make sense to use in your environment.</p>

<p>I tested all of this with Satellite 6.12, 6.13 and 6.14. It <em>should</em> work the same for other Satellite versions, but I cannot guarantee it.</p>

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> Just as a general information: Variables that are prefixed with <code class="language-plaintext highlighter-rouge">satellite_</code> are ‘official’ role variables of the roles we are going to use. Variables
prefixed with <code class="language-plaintext highlighter-rouge">sat_</code> are custom variables (which usually get merged into a <code class="language-plaintext highlighter-rouge">satellite_</code> variable eventually).</p>

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> I am going to use <code class="language-plaintext highlighter-rouge">ansible-playbook</code> in this blog post and will thus install all required collections and roles as the current user. Of course, you can
also make use of <code class="language-plaintext highlighter-rouge">ansible-navigator</code> with an Execution Environment that contains the collections and roles which are defined in <code class="language-plaintext highlighter-rouge">collections/requirements.yml</code>. This blog
post won’t cover the procedure of how to do that, however.</p>

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> You need to be a Red Hat subscriber in order to follow this blog post. If you are not, you can use a
<a href="https://developers.redhat.com/articles/faqs-no-cost-red-hat-enterprise-linux">no-cost Red Hat Developer Subscription</a>, which includes the Ansible Automation Platform
subscription (required for the certified collections) and the Satellite Infrastructure subscription. Of course, you could also use the upstream projects
(e.g. <code class="language-plaintext highlighter-rouge">Foreman</code>/<code class="language-plaintext highlighter-rouge">Katello</code>) and upstream collections (e.g. <code class="language-plaintext highlighter-rouge">theforeman.foreman</code>) to follow along, but for that you need to adjust <em>every</em> playbook
(and not ‘just’ the GitHub <code class="language-plaintext highlighter-rouge">gists</code>) and it might not work at all, as I haven’t tested it.</p>
<h2 id="prerequisites">
  
  
    Prerequisites <a href="#prerequisites">#</a>
  
  
</h2>
    

<ol>
  <li>
    <p>You need a host that will run Ansible and carry out the automation.</p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> This has been tested on:</p>

    <ul>
      <li>RHEL 8.7 and Ansible Core 2.14.6</li>
      <li>RHEL 8.8 and Ansible Core 2.15.4</li>
      <li>RHEL 8.9 and Ansible Core 2.15.4</li>
      <li>RHEL 9.2 and Ansible Core 2.14.2</li>
      <li>RHEL 9.3 and Ansible Core 2.14.2</li>
    </ul>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> RHEL 7 is not going to work for this purpose, as only Ansible Engine 2.9 can (officially) be installed on it (which is too old for most - if not all -
 collections we are going to use).</p>
  </li>
  <li>
    <p>Login to the host you’ll be using to carry out the automation via SSH. Install <code class="language-plaintext highlighter-rouge">git</code>, check out my repository and change to the directory that has been created with
the <code class="language-plaintext highlighter-rouge">git clone</code> command:</p>

    <p><!-- markdownlint-disable MD014 --></p>
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">-y</span> git
 <span class="nv">$ </span>git clone https://github.com/sscheib/ansible_satellite.git
 <span class="nv">$ </span><span class="nb">cd </span>ansible_satellite
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>
    <p>Configure Ansible that it’ll be able to download
<a href="https://access.redhat.com/support/articles/ansible-automation-platform-certified-content">Red Hat’s Ansible Certified Content Collections</a> that are needed for the playbooks
to work from either your local Automation Hub or from <a href="https://console.redhat.com/ansible/automation-hub">Red Hat’s Automation Hub</a>. If you don’t know how to do either of
those things, please use<a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.4/html-single/getting_started_with_automation_hub/index#proc-create-api-token">Red Hat’s documentation</a>
that explains how to connect to <a href="https://console.redhat.com/ansible/automation-hub">Red Hat’s Automation Hub</a>.
Place your Ansible configuration file either in the directory you checked out (<code class="language-plaintext highlighter-rouge">ansible_satellite</code>) as <code class="language-plaintext highlighter-rouge">ansible.cfg</code> or in your home directory with a prefixed dot: <code class="language-plaintext highlighter-rouge">~/.ansible.cfg</code>.</p>

    <p>Your Ansible configuration file will look similar to the example below:</p>

    <div class="language-ini highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nn">[galaxy]</span>
 <span class="py">server_list</span> <span class="p">=</span> <span class="s">automation-hub,galaxy</span>

 <span class="nn">[galaxy_server.automation-hub]</span>
 <span class="py">url</span><span class="p">=</span><span class="s">https://console.redhat.com/api/automation-hub/content/REDACTED-synclist/</span>
 <span class="py">auth_url</span><span class="p">=</span><span class="s">https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token</span>
 <span class="py">token</span><span class="p">=</span><span class="s">REPLACE_WITH_YOUR_TOKEN</span>

 <span class="nn">[galaxy_server.galaxy]</span>
 <span class="py">url</span><span class="p">=</span><span class="s">https://galaxy.ansible.com</span>
</code></pre></div>    </div>
  </li>
  <li>Install the required collections:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-galaxy collection <span class="nb">install</span> <span class="nt">-r</span> collections/requirements.yml
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>Install the required roles:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-galaxy role <span class="nb">install</span> <span class="nt">-r</span> collections/requirements.yml
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>Create a Manifest for Satellite - we are going to import it at a <a href="#importing-a-manifest">later point</a>. If you don’t know how to do it, please
follow <a href="https://www.redhat.com/en/blog/how-create-and-use-red-hat-satellite-manifest">Red Hat’s blog</a> that explains very well how to create a Manifest.</li>
  <li>Put the <code class="language-plaintext highlighter-rouge">Manifest UUID</code> in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/00a_secrets.yml</code>. As mentioned before, we are going to need it at a <a href="#importing-a-manifest">later point</a>.</li>
  <li>
    <p>Optional (but <strong>highly encouraged!</strong>): You can create a <a href="https://docs.ansible.com/ansible/latest/user_guide/vault.html#providing-vault-passwords">Vault password file</a> file to
pass it to <code class="language-plaintext highlighter-rouge">ansible-playbook</code> via <code class="language-plaintext highlighter-rouge">--vault-pass-file</code>. I named mine <code class="language-plaintext highlighter-rouge">.vault.pass</code> and added it to my <a href="https://git-scm.com/docs/gitignore"><code class="language-plaintext highlighter-rouge">.gitignore</code> file</a> to ensure it
is not accidentally pushed to the repository. As you are going to need the Vault for <em>every</em> playbook of my repository, it is handy to have a Vault password file - unless
you chose to not encrypt your secrets (<strong>highly discouraged!</strong>).</p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> If you are not familiar with Ansible Vault, please
 <a href="https://docs.ansible.com/ansible/latest/vault_guide/vault_encrypting_content.html#encrypting-content-with-ansible-vault">read up on it</a> and don’t store your secrets in
 plain text in your variables files. It is really super easy to get started with Ansible Vault, I promise <img class="emoji" title=":slightly_smiling_face:" alt=":slightly_smiling_face:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f642.png" height="20" width="20">!</p>
  </li>
</ol>
<h2 id="install-satellite-server">
  
  
    Install Satellite server <a href="#install-satellite-server">#</a>
  
  
</h2>
    

<p>The very first step is to install the RHEL 8 host that will be our Satellite eventually.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation">
  
  
    Documentation <a href="#documentation">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://github.com/sscheib/ansible-role-rhel_iso_kickstart">Role <code class="language-plaintext highlighter-rouge">rhel_iso_kickstart</code></a></li>
  <li><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/automatically_installing_rhel/kickstart-script-file-format-reference_rhel-installer">Kickstart commands and options reference for RHEL 8</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">rhel_iso_kickstart</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/00_kickstart.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">00_create_kickstart.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure">
  
  
    Procedure <a href="#procedure">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Adjust the included Kickstart (<code class="language-plaintext highlighter-rouge">files/satellite.ks</code>) to your liking.</li>
  <li>
    <p>Adjust the variables for the role <a href="https://github.com/sscheib/ansible-role-rhel_iso_kickstart"><code class="language-plaintext highlighter-rouge">rhel_iso_kickstart</code></a></p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> In my case, I am going to run the role <a href="https://github.com/sscheib/ansible-role-rhel_iso_kickstart"><code class="language-plaintext highlighter-rouge">rhel_iso_kickstart</code></a> on <code class="language-plaintext highlighter-rouge">localhost</code>
 (as I want to have the ISO downloaded and built on my machine), so the <code class="language-plaintext highlighter-rouge">host_vars</code> have to be placed in the directory <code class="language-plaintext highlighter-rouge">host_vars/localhost/</code>. I have chosen to place
 them in the file <code class="language-plaintext highlighter-rouge">00_kickstart.yml</code> inside that directory.</p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> Make sure to read the <a href="https://github.com/sscheib/ansible-role-rhel_iso_kickstart"><code class="language-plaintext highlighter-rouge">README.md</code> of my role <code class="language-plaintext highlighter-rouge">rhel_iso_kickstart</code></a> to fully understand
 all variables.</p>
  </li>
  <li>Run the playbook that will download the specified RHEL ISO and build a custom RHEL ISO containing the specified Kickstart file:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook 00_create_kickstart.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-disable MD024 --></p>
  </li>
  <li>Copy the resulting ISO file to your hypervisor and mount it to your virtual machine that should become the Satellite.</li>
  <li>Start the virtual machine and wait for the installation to finish.</li>
  <li>
    <p>Once the installation finished, shutdown the virtual machine and unmount the ISO.</p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> If you used the provided Kickstart, the virtual machine will shut down after the Kickstart finished.</p>
  </li>
</ol>
<h2 id="prepare-satellite-for-ansible-access">
  
  
    Prepare Satellite for Ansible access <a href="#prepare-satellite-for-ansible-access">#</a>
  
  
</h2>
    

<p>Now that we have successfully installed our RHEL 8 system, we need to ensure that Ansible can access the system and <strong>elevate its privileges</strong>.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-1">
  
  
    Procedure <a href="#procedure-1">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>
    <p>Login via SSH to the new virtual machine using <code class="language-plaintext highlighter-rouge">root</code> as username and the root password you defined in <code class="language-plaintext highlighter-rouge">00_kickstart.yml</code></p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> This step assumes that you have not already created a local user (other than <code class="language-plaintext highlighter-rouge">root</code>, of course) on the Satellite server. If you already created a
 local user as part of the Kickstart (or other means), please ensure that the user has privileged access; You can skip step <strong>2</strong> and <strong>3</strong>.</p>
  </li>
  <li>Create a new user for Ansible, e.g. <code class="language-plaintext highlighter-rouge">ansible-provisioning</code>.</li>
  <li>Either set a password for <code class="language-plaintext highlighter-rouge">ansible-provisioning</code> or deploy your SSH key to the created user.</li>
  <li>Ensure you add the user to the group <code class="language-plaintext highlighter-rouge">%wheel</code> so that you can elevate the privileges of the user.</li>
  <li>
    <p>Add the virtual machine host to the inventory file. Below you’ll find an example:</p>

    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cat </span>inventory
 satellite.office.int.scheib.me <span class="nv">ansible_user</span><span class="o">=</span>ansible-provisioning <span class="nv">ansible_port</span><span class="o">=</span>22
</code></pre></div>    </div>
  </li>
  <li>
    <p>Ensure that your access to the virtual machine is working properly:</p>

    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible <span class="nt">--become</span> <span class="nt">-m</span> ping <span class="nt">-i</span> inventory all
 satellite.office.int.scheib.me | SUCCESS <span class="o">=&gt;</span> <span class="o">{</span>
     <span class="s2">"ansible_facts"</span>: <span class="o">{</span>
         <span class="s2">"discovered_interpreter_python"</span>: <span class="s2">"/usr/libexec/platform-python"</span>
     <span class="o">}</span>,
     <span class="s2">"changed"</span>: <span class="nb">false</span>,
     <span class="s2">"ping"</span>: <span class="s2">"pong"</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>
<h2 id="registering-the-system-to-the-red-hat-customer-portal-and-installing-red-hat-satellite">
  
  
    Registering the system to the Red Hat Customer Portal and installing Red Hat Satellite <a href="#registering-the-system-to-the-red-hat-customer-portal-and-installing-red-hat-satellite">#</a>
  
  
</h2>
    

<p>Now it’s time to register our RHEL system to the Red Hat Customer Portal. Please ensure that the host ends up with a Satellite Infrastructure subscription (or equivalent)
as, otherwise, the Red Hat Satellite repositories cannot be found.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-1">
  
  
    Documentation <a href="#documentation-1">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/rhel_system_roles/docs/README_rhc/">Role <code class="language-plaintext highlighter-rouge">redhat.rhel_system_roles.rhc</code></a></li>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite_operations/content/role/installer/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite_operations.installer</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/assembly_registering-the-system-and-managing-subscriptions_configuring-basic-system-settings">Registering a RHEL 8 system and managing subscriptions</a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/installing_satellite_server_in_a_connected_network_environment/installing_server_connected_satellite">Red Hat Satellite 6.14 Installation documentation</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-1">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-1">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:1" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.rhel_system_roles.rhc</code></td>
    </tr>
    <tr>
      <td style="text-align: left">2</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite_operations.installer</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/00b_register_satellite.yml</code></td>
    </tr>
    <tr>
      <td style="text-align: left" rowspan="3">2
<br><br>
</td>
      <td style="text-align: left" rowspan="3">
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/01a_satellite_installer_certificates.yml</code>
<br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/01b_satellite_firewall_rules.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/01c_satellite_installer_configuration.yml</code>
</td>
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">01_register_satellite.yml</code></td>
    </tr>
    <tr>
      <td style="text-align: left">2</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">02_satellite_installer.yml</code></td>
    </tr>
  </tbody>
</table>

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The variable file where we put our secrets in (<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/00a_secrets.yml</code>) is used in almost all roles and playbooks, and thus it isn’t
added to the table above as it would need to be included in all further tables.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-2">
  
  
    Procedure <a href="#procedure-2">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>
    <p>Define your secrets in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/00a_secrets.yml</code>, please see below for an example.</p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> Not all variables are needed right away, but it makes sense to define all of them at once. Please read the comments in the GitHub gist below.</p>

    <script src="https://gist.github.com/4fbc66d25da509522e16791e497a27a2.js"> </script>
  </li>
  <li>
    <p>Define the variables for the <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/automating_system_administration_by_using_rhel_system_roles/using-the-rhc-system-role-to-register-the-system_automating-system-administration-by-using-rhel-system-roles">RHEL system role <code class="language-plaintext highlighter-rouge">redhat.rhel_system_roles.rhc</code></a>,
please find below an example of my variables file (<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/00b_register_satellite.yml</code>):
 <script src="https://gist.github.com/14d99b2931ce8e1bed1f6e9ac717326e.js"> </script></p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> If you want to install a different Satellite version than 6.14, you need to adjust the variable <code class="language-plaintext highlighter-rouge">rhc_repositories</code> to enable the proper
 repositories for the desired Satellite version.</p>
  </li>
  <li>Run the playbook that registers your Satellite system to the Red Hat Content Delivery Network (<code class="language-plaintext highlighter-rouge">RHCDN</code>):
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 01_register_satellite.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>Next, we’ll define the variables for the
<a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite_operations/content/role/installer/">Satellite Installer role <code class="language-plaintext highlighter-rouge">redhat.satellite_operations.installer</code></a>.
I have split the variables in three files:
    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/01a_satellite_installer_certificates.yml</code>: Contains variables with regards to certificates
 <script src="https://gist.github.com/7bbba923af596280573aa987180837fd.js"> </script></p>

        <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> When generating certificates for your Satellite, remember to set the correct <code class="language-plaintext highlighter-rouge">keyUsage</code> and <code class="language-plaintext highlighter-rouge">extendedKeyUsage</code><sup id="fnref:key_usage" role="doc-noteref"><a href="#fn:key_usage" class="footnote" rel="footnote">2</a></sup>.</p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/01b_satellite_firewall_rules.yml</code>: Contains the ports to open on the Satellite
 <script src="https://gist.github.com/0b029863ee4e9953ab88978608bae777.js"> </script></p>

        <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> Above firewall rules are specific to <em>my</em> use case. You need to adapt these based on the Satellite documentation and your used features (such as <code class="language-plaintext highlighter-rouge">TFTP</code>,
 <code class="language-plaintext highlighter-rouge">DHCP</code>, <code class="language-plaintext highlighter-rouge">DNS</code>, etc.).</p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/01c_satellite_installer_configuration.yml</code>: Contains all other variables for the role <code class="language-plaintext highlighter-rouge">redhat.satellite_operations.installer</code>
 <script src="https://gist.github.com/c99c3008a954a4ddb81451bad99b599f.js"> </script></p>

        <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> If you are not planning to use certificates, please remove the certificate installer options from above example (<code class="language-plaintext highlighter-rouge">--certs-server-cert</code>,
 <code class="language-plaintext highlighter-rouge">--certs-server-key</code>, <code class="language-plaintext highlighter-rouge">--certs-server-ca-cert</code>). Don’t worry, the Satellite installer will create self-signed certificates. The certificate options
 are meant for implementing custom SSL certificates that have been signed by your internal certificate authority.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Run the playbook to upgrade your system to the latest version (required) and install Satellite:</p>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> This will reboot your Satellite to ensure the latest kernel is applied (as per the Satellite documentation).
 <!-- markdownlint-disable MD014 --></p>
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 02_satellite_installer.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>Verify that you can login to your Satellite instance once the playbook finished</li>
  <li>Shutdown the virtual machine and take a snapshot so you can roll back to this point when you encounter any issues later on</li>
</ol>
<h2 id="define-general-variables">
  
  
    Define general variables <a href="#define-general-variables">#</a>
  
  
</h2>
    

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-2">
  
  
    Documentation <a href="#documentation-2">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li>
    <p><a href="https://github.com/theforeman/foreman-ansible-modules/blob/develop/README.md#common-role-variables">Satellite Collection Common Role Variables</a></p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The upstream common role variables are <em>not</em> used downstream in the Satellite collection. All <code class="language-plaintext highlighter-rouge">foreman_</code> variables can be substituted with
<code class="language-plaintext highlighter-rouge">satellite_</code>, e.g. <code class="language-plaintext highlighter-rouge">foreman_url</code> -&gt; <code class="language-plaintext highlighter-rouge">satellite_url</code></p>
  </li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-2">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-2">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:2" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">Used in almost all roles</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/02_general.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">Used in almost all playbooks</td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-3">
  
  
    Procedure <a href="#procedure-3">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>
    <p>With this, we define variables that are reused multiple times. To avoid duplication, it is good to define them once. Please see below an example of my definition:
 <script src="https://gist.github.com/1bb3a400efe20cb7a07a7b64730ad1d2.js"> </script></p>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> If you know that your Linux host is slow in synchronizing the Repositories or publishing and promoting (Composite) Content Views (due to e.g. slow storage),
 consider significantly raising the value of <code class="language-plaintext highlighter-rouge">sat_repository_sync_retries</code>, <code class="language-plaintext highlighter-rouge">sat_content_view_publish_retries</code> and <code class="language-plaintext highlighter-rouge">sat_composite_content_view_publish_retries</code>, as
 otherwise the respective tasks (and thus the playbook) will fail. The status is checked every <code class="language-plaintext highlighter-rouge">3</code> seconds, so the time is (roughly) calculated as <code class="language-plaintext highlighter-rouge">3 * number_of_retries</code>.
 In this case it would be <code class="language-plaintext highlighter-rouge">3 * 3600 = 10800 seconds = 180 minutes = 3 hours</code>.</p>
  </li>
</ol>
<h2 id="optional-configure-satellites-cloud-connector">
  
  
    <em>Optional</em>: Configure Satellite’s Cloud Connector <a href="#optional-configure-satellites-cloud-connector">#</a>
  
  
</h2>
    

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> This step is entirely optional, as it merely configures Satellite’s Cloud Connector.</p>

<p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> Please make sure that you really <strong>want</strong> to have the Cloud Connector enabled. The Cloud Connector allows Red Hat Insights to <strong>run remediation on your Satellite</strong>
from the <a href="https://console.redhat.com">Red Hat Hybrid Cloud Console</a>.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-3">
  
  
    Documentation <a href="#documentation-3">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite_operations/content/role/cloud_connector/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite_operations.cloud_connector</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html-single/red_hat_insights_remediations_guide/index">Red Hat Insights Remediations Guide</a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html-single/red_hat_insights_remediations_guide/index#configuring-satellite-cloud-connector_host-communication-with-insights">Enabling Cloud Connector on hosts managed by Satellite</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-3">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-3">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:3" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite_operations.cloud_connector</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/03_cloud_connector.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">03_satellite_cloud_connector.yml</code></td>
    </tr>
  </tbody>
</table>

<ol>
  <li>Define the variables for the role <code class="language-plaintext highlighter-rouge">redhat.satellite_operations.cloud_connector</code>. Please see an example below:
 <script src="https://gist.github.com/64a79193346520cb437930b4497c7f7d.js"> </script>
</li>
  <li>Run the playbook to configure Satellite’s Cloud Connector:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 03_satellite_cloud_connector.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="importing-a-manifest">
  
  
    Importing a Manifest <a href="#importing-a-manifest">#</a>
  
  
</h2>
    

<p>Next up, we are going to import a Manifest into our Satellite. I have configured the role <code class="language-plaintext highlighter-rouge">redhat.satellite.manifest</code> to first download a Manifest from the Red Hat Customer
Portal and then upload it to my Satellite. If you are doing the same, please ensure that you set the correct <code class="language-plaintext highlighter-rouge">Manifest UUID</code> in <code class="language-plaintext highlighter-rouge">satellite_manifest_uuid</code>, as well as the
<code class="language-plaintext highlighter-rouge">satellite_rhsm_username</code> and <code class="language-plaintext highlighter-rouge">satellite_rhsm_password</code>. (as described in
<a href="#registering-the-system-to-the-red-hat-customer-portal-and-installing-red-hat-satellite">Registering the system to the Red Hat Customer Portal and installing Red Hat Satellite</a>).</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-4">
  
  
    Documentation <a href="#documentation-4">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/manifest/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.manifest</code></a></li>
  <li><a href="https://www.redhat.com/en/blog/how-create-and-use-red-hat-satellite-manifest">How to create and use a Red Hat Satellite manifest</a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/managing_red_hat_subscriptions_content-management#Importing_a_Red_Hat_Subscription_Manifest_into_Server_content-management">Importing a Red Hat Subscription Manifest into Satellite Server</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-4">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-4">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:4" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.manifest</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/04_manifest.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">04_satellite_manifest.yml</code></td>
    </tr>
  </tbody>
</table>

<ol>
  <li>Adjust the variables for this step in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/04_manifest.yml</code>, please see below for an example:
 <script src="https://gist.github.com/5e8b980306c43281971f6f8976c9a351.js"> </script>
</li>
  <li>Run the playbook to download the manifest and import it to your Satellite:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 04_satellite_manifest.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="creating-content-credentials-for-custom-products">
  
  
    Creating Content Credentials for custom Products <a href="#creating-content-credentials-for-custom-products">#</a>
  
  
</h2>
    

<p>Before creating custom Products and repositories, we need to create the custom Content Credentials. This is required, as we are going to use those Content Credentials to
ensure that the content we retrieve is retrieved without any modification (through a malicious actor for instance). This is only required for 3rd-party repositories, as
Red Hat repositories are validated by default.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-5">
  
  
    Documentation <a href="#documentation-5">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/content_credentials/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.content_credentials</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/importing_content_content-management#Importing_Custom_SSL_Certificates_content-management">Importing Custom SSL Certificates</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-5">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-5">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:5" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.content_credentials</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/05_content_credentials.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">05_satellite_content_credentials.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-4">
  
  
    Procedure <a href="#procedure-4">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>
    <p>Define the required Content Credentials for any custom Product in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/05_content_credentials.yml</code>. Please see an example of my Content Credentials below:
 <script src="https://gist.github.com/b573c065923442511509c519938b6f89.js"> </script></p>
  </li>
  <li>
    <p>Run the playbook to create the Content Credentials:
 <!-- markdownlint-disable MD014 --></p>
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 05_satellite_content_credentials.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="enabling-red-hat-repositories-creating-custom-products-and-repositories-and-synchronize-the-repositories">
  
  
    Enabling Red Hat Repositories, creating custom Products and Repositories and synchronize the Repositories <a href="#enabling-red-hat-repositories-creating-custom-products-and-repositories-and-synchronize-the-repositories">#</a>
  
  
</h2>
    

<p>Now that we have created the Content Credentials for our custom Products, we can start creating the custom Products and their containing Repositories. Further, we are going
to enable the official Red Hat Repositories that we require. Conveniently, this can all be done by one role, so we are doing it in one go.</p>

<p>Since we do a couple of things with one role, I decided to split up my variables into Custom Products (<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06a_products.yml</code>) and Red Hat
Products (<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06a_products.yml</code>). Lastly, we combine the two definitions into one variable which is stored as <code class="language-plaintext highlighter-rouge">satellite_repositories</code>: That is the
variable the role <code class="language-plaintext highlighter-rouge">redhat.satellite.repositories</code> requires.</p>

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> Unfortunately, this step requires an already installed Satellite. I am not aware of any other method of finding out the Product and Repository names.
If you know another way, kindly let me know in the comments below.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-6">
  
  
    Documentation <a href="#documentation-6">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/repositories/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.repositories</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/introduction_to_content_management_content-management">Introduction to Content Management</a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/importing_content_content-management#Download_Policies_Overview_content-management">Download Policies Overview</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-6">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-6">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:6" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.repositories</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left" rowspan="3">1
<br><br>
</td>
      <td style="text-align: left" rowspan="3">
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06a_products.yml</code>
<br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06b_custom_products.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06c_combined_products.yml</code>
</td>
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">06_satellite_products_and_repositories.yml</code></td>
    </tr>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">07_satellite_sync_repositories.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-5">
  
  
    Procedure <a href="#procedure-5">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>
    <p>Finding out Red Hat Repository and Product names</p>

    <p>This step requires an already installed Satellite (to my knowledge), because you need to find out two things:</p>
    <ul>
      <li>The Product name a Repository is tied to</li>
      <li>The Repository name itself</li>
    </ul>

    <p>The Repository and Product names can be found out via the following procedure:</p>
    <ol>
      <li>
<code class="language-plaintext highlighter-rouge">Satellite WebUI</code> -&gt; <code class="language-plaintext highlighter-rouge">Content</code> -&gt; <code class="language-plaintext highlighter-rouge">Red Hat Repositories</code>
</li>
      <li>Click on <code class="language-plaintext highlighter-rouge">Filter by Product</code> and select a Product, e.g. <code class="language-plaintext highlighter-rouge">Red Hat Enterprise Linux for x86_64</code> (this is the <strong>Product Name</strong> to use)</li>
      <li>Select the appropriate “Type” (right hand side to the <code class="language-plaintext highlighter-rouge">Filter by Product</code> drop-down), e.g. <code class="language-plaintext highlighter-rouge">RPM</code> for <code class="language-plaintext highlighter-rouge">RPM</code> repositories, <code class="language-plaintext highlighter-rouge">Kickstart</code> for Kickstart repositories</li>
      <li>Either scroll through the <code class="language-plaintext highlighter-rouge">Available Repositories</code> or narrow the list further down using the search bar at the top</li>
      <li>The search lists contains the <strong>Repository Name</strong> to use</li>
      <li>Each Repository has a arrow an the left hand side. When clicking on it, it reveals two things:
        <ul>
          <li>The architecture (e.g. <code class="language-plaintext highlighter-rouge">x86_64</code>)</li>
          <li>The release (which is optional and thus not available for every repository), (e.g. <code class="language-plaintext highlighter-rouge">8</code>, <code class="language-plaintext highlighter-rouge">8.7</code>, etc.)</li>
        </ul>
      </li>
    </ol>
  </li>
  <li>
    <p>Define the Red Hat Repositories and Products in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06a_products.yml</code>
 <script src="https://gist.github.com/1ab1bbd6cc74c1f1fb47ea16c5e054ef.js"> </script></p>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> The Kickstart Repositories are set to the <code class="language-plaintext highlighter-rouge">download_policy</code> <code class="language-plaintext highlighter-rouge">immediate</code> as having them set to <code class="language-plaintext highlighter-rouge">on_demand</code> is known to cause issues during provisioning.</p>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> I recommend setting the <code class="language-plaintext highlighter-rouge">download_policy</code> to <code class="language-plaintext highlighter-rouge">immediate</code> on custom upstream repositories, as usually the upstream repositories do <strong>not</strong> keep <strong>all
 versions</strong> of an <code class="language-plaintext highlighter-rouge">RPM</code>, which will cause issues if a client tries to install an older version. Red Hat keeps all <code class="language-plaintext highlighter-rouge">RPMs</code> in their respective repositories, that’s why it is
 not required to set them on <code class="language-plaintext highlighter-rouge">immediate</code>.</p>
  </li>
  <li>Define the custom Products and their containing Repositories in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06b_custom_products.yml</code>
 <script src="https://gist.github.com/f483a67504e10ef76189ea5a921dcecc.js"> </script>
</li>
  <li>The two definition will be merged in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/06c_combined_products.yml</code>
 <script src="https://gist.github.com/ea886810cd22867a096eb2d3f96a48c5.js"> </script>
</li>
  <li>Run the playbook to enable and/or create the custom Products and Repositories
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 06_satellite_products_and_repositories.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>
    <p>Run the playbook to synchronize the Repositories (both custom and Red Hat)</p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> This might take a while.</p>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> If you’d like to follow along with the blog post, you <em>have</em> to run this step, as otherwise the Content Views <em>will</em> be <em>empty</em>!
 <!-- markdownlint-disable MD014 --></p>
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 07_satellite_sync_repositories.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-sync-plans">
  
  
    Create Sync Plans <a href="#create-sync-plans">#</a>
  
  
</h2>
    

<p>To ensure our content is kept up to date, we are going to create Sync Plans in the next step.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-7">
  
  
    Documentation <a href="#documentation-7">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/sync_plans/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.sync_plans</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/importing_content_content-management#Creating_a_Sync_Plan_content-management">Creating a Sync Plan</a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/importing_content_content-management#Assigning_a_Sync_Plan_to_a_Product_content-management">Assigning a Sync Plan to a Product</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-7">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-7">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:7" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.sync_plans</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/07_sync_plans.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">08_satellite_sync_plans.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-6">
  
  
    Procedure <a href="#procedure-6">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>
    <p>Define the Sync Plans in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/07_sync_plans.yml</code>
 <script src="https://gist.github.com/00a3ab9f03266ba08e80cc756d43ecc0.js"> </script></p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> I am reusing the definition of the Products we have done earlier to map all products to one Sync Plan.</p>
  </li>
  <li>
    <p>Run the playbook to create the Sync Plans:
 <!-- markdownlint-disable MD014 --></p>
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 08_satellite_sync_plans.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-lifecycle-environments">
  
  
    Create Lifecycle Environments <a href="#create-lifecycle-environments">#</a>
  
  
</h2>
    

<p>When it comes to Lifecycle Environments I have a <em>very</em> simple use case. I have two Lifecycle Environments and that’s it. Your use case might be much more complex, but
the example below should get you up to speed quickly.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-8">
  
  
    Documentation <a href="#documentation-8">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/lifecycle_environments/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.lifecycle_environments</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/managing_application_lifecycles_content-management">Managing Application Life Cycles</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-8">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-8">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:8" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.lifecycle_environments</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/08_lifecycle_environments.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">09_satellite_lifecycle_environments.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-7">
  
  
    Procedure <a href="#procedure-7">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Lifecycle Environment in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/08_lifecycle_environments.yml</code>. Please see below for an example:
 <script src="https://gist.github.com/3dfd83aa5d7231d602b715316ce1f419.js"> </script>
</li>
  <li>Run the playbook to create the Lifecycle Environments:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 09_satellite_lifecycle_environments.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-domains">
  
  
    Create Domains <a href="#create-domains">#</a>
  
  
</h2>
    

<p>This one is super easy for my use case as well. I have exactly <strong>one</strong> Domain I am using internally for my lab environment: <code class="language-plaintext highlighter-rouge">office.int.scheib.me</code>. Since this is
conveniently also the value of the initial Domain I have specified, I am just reusing it. Your use case might be much more complex; This example can easily be extended.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-9">
  
  
    Documentation <a href="#documentation-9">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/domains/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.domains</code></a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-9">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-9">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:9" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.domains</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/09_domains.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">10_satellite_domains.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-8">
  
  
    Procedure <a href="#procedure-8">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Domains in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/09_domains.yml</code>
 <script src="https://gist.github.com/6f33448c5ef7750f10c79d88cd301ed7.js"> </script>
</li>
  <li>Run the playbook to create the Domains:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 10_satellite_domains.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-subnets">
  
  
    Create Subnets <a href="#create-subnets">#</a>
  
  
</h2>
    

<p>When it comes to Subnets it’s the same as for the Domains: I have a super easy use case. One Subnet. That’s it <img class="emoji" title=":grin:" alt=":grin:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png" height="20" width="20"></p>

<p>Again, your use case might be much, much more complex, but the example below should get you up to speed quickly.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-10">
  
  
    Documentation <a href="#documentation-10">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/subnets/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.subnets</code></a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-10">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-10">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:10" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.subnets</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/10_subnets.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">11_satellite_subnets.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-9">
  
  
    Procedure <a href="#procedure-9">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Subnets in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/10_subnets.yml</code>
 <script src="https://gist.github.com/85c7a7082456159c05b6e8850f5a54a9.js"> </script>
</li>
  <li>Run the playbook to create the Subnets:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 11_satellite_subnets.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="define-the-composite-content-views-and-publish-and-promote-them">
  
  
    Define the (Composite) Content Views and publish and promote them <a href="#define-the-composite-content-views-and-publish-and-promote-them">#</a>
  
  
</h2>
    

<p>We are now going to automate one of the more complex things: Content Views and Composite Content Views. Since Composite Content Views will contain <code class="language-plaintext highlighter-rouge">components</code>
(which are Content View Versions), they are dependent on the Content Views being present at the time we are going to create the Composite Content Views. So, the order
really matters!</p>

<p>As the order matters, I am splitting again the Content Views in the <code class="language-plaintext highlighter-rouge">host_vars</code> in to several files:</p>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11a_content_views_custom_products.yml</code>: Contains Content Views with Custom Products we have created earlier</li>
  <li>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11b_content_views.yml</code>: Contains Content Views which use official Red Hat Products</li>
  <li>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11c_composite_content_views.yml</code>: Contains Composite Content Views (which depend on the creation of the earlier defined Content Views)</li>
  <li>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11d_combined_content_views.yml</code>: Lastly, I merge the definitions of the aforementioned (Composite) Content Views into one variable, which is
used by the role <code class="language-plaintext highlighter-rouge">redhat.satellite.content_views</code>: <code class="language-plaintext highlighter-rouge">satellite_content_views</code>
</li>
</ol>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-11">
  
  
    Documentation <a href="#documentation-11">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/content_views/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.content_views</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/managing_content_views_content-management">Managing Content Views</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-11">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-11">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:11" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.content_views</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left" rowspan="4">1
<br><br><br>
</td>
      <td style="text-align: left" rowspan="4">
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11a_content_views_custom_products.yml</code>
<br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11b_content_views.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11c_composite_content_views.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11d_combined_content_views.yml</code>
</td>
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">12_satellite_content_views.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-10">
  
  
    Procedure <a href="#procedure-10">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Content Views with custom Products in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11a_content_views_custom_products.yml</code>
 <script src="https://gist.github.com/12fd843551041ed98632060d72b9dd60.js"> </script>
</li>
  <li>Define the Content Views with Red Hat Products in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11b_content_views.yml</code>
 <script src="https://gist.github.com/50c5c2fee3238b47e2cee256ad488078.js"> </script>
</li>
  <li>Define the Composite Content Views in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11c_composite_content_views.yml</code>
 <script src="https://gist.github.com/577f57b8b67b5accc6436ce21b69b62c.js"> </script>
</li>
  <li>The definitions of 1. to 3. will be merged in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/11d_combined_content_views.yml</code>
 <script src="https://gist.github.com/8df9e83c3c21836afc83af093e34a3db.js"> </script>
</li>
  <li>Run the playbook to create the (Composite) Content Views:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 12_satellite_content_views.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>Run the playbook to publish and promote the (Composite) Content Views
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 13_satellite_content_view_publish.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="apply-satellite-settings-and-enable-template-synchronization">
  
  
    Apply Satellite settings and enable Template Synchronization <a href="#apply-satellite-settings-and-enable-template-synchronization">#</a>
  
  
</h2>
    

<p>We need to apply some settings in Satellite, as the Operating System definitions depend on Provision Templates that have to be imported prior to defining the Operating Systems.
The Host Groups and the Activation Keys (which we still need to create) rely on the definitions of the Operating System, thus we need to start with importing the Templates.</p>

<p>I make use of <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_hosts/synchronizing_templates_repositories_managing-hosts">Satellite’s <code class="language-plaintext highlighter-rouge">TemplateSync</code> Plug-in</a>
which allows us to import Templates from a Source Code Management (<code class="language-plaintext highlighter-rouge">SCM</code>) tool (such as GitHub or Git Lab). <code class="language-plaintext highlighter-rouge">TemplateSync</code> will also assign the Templates to the correct Operating
System, Organization and Location, if the
<a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_hosts/synchronizing_templates_repositories_managing-hosts#Importing_Templates_managing-hosts">required metadata</a>
is present in the Template’s header.</p>

<p>Again, I have split my variables into several files to not have one very large confusing file. I named the files like the tabs in the
<code class="language-plaintext highlighter-rouge">Satellite Web UI</code> -&gt; <code class="language-plaintext highlighter-rouge">Administer</code> -&gt; <code class="language-plaintext highlighter-rouge">Settings</code>.</p>

<p>This chapter essentially covers two steps:</p>

<ol>
  <li>Set specific settings in the Satellite, especially the Template Sync settings. But since we are on it, I’ll define <em>all</em> settings right away to spare me some time.</li>
  <li>
    <p>Run the Template Sync to import the Templates of my <a href="https://github.com/sscheib/satellite_templates">Kickstart Repository on GitHub</a>. The playbook will
perform <a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_hosts/synchronizing_templates_repositories_managing-hosts#Enabling_the_TemplateSync_plugin_managing-hosts">the steps that are required to synchronize Templates</a>
from git. Please review them prior to running the playbook (<code class="language-plaintext highlighter-rouge">15_satellite_template_sync.yml</code>).</p>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> You obviously <em>have</em> to either fork <a href="https://github.com/sscheib/satellite_templates">my Satellite template repository</a> or create your own GitHub repository
 with your Templates to be able to create a GitHub Token (which will be done in this chapter).</p>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> Unfortunately, there is no role to configure and run the Template Sync. This will be done by a custom playbook I have written and importing the
 Templates using the Satellite API. It is a playbook, as I didn’t see the need to create a role for such a basic task.</p>
  </li>
</ol>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-12">
  
  
    Documentation <a href="#documentation-12">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/settings/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.settings</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_hosts/synchronizing_templates_repositories_managing-hosts">Synchronizing Template Repositories</a></li>
  <li><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#fine-grained-personal-access-tokens">GitHub: Managing your personal access tokens</a></li>
  <li><a href="https://blog.scheib.me/2023/07/01/highly-customized-kickstart.html">Kickstarting Red Hat Enterprise Linux (RHEL) systems using a highly customized Kickstart with Red Hat Satellite 6</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-12">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-12">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:12" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> <code class="language-plaintext highlighter-rouge">12a_settings_template_sync.yml</code> is added twice, as both playbooks make use of it.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.settings</code></td>
    </tr>
    <tr>
      <td style="text-align: left">2</td>
      <td style="text-align: left">N/A</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left" rowspan="7">1
<br><br><br><br><br><br>
</td>
      <td style="text-align: left" rowspan="7">
<code class="language-plaintext highlighter-rouge">12a_settings_template_sync.yml</code>
<br>
<code class="language-plaintext highlighter-rouge">12b_settings_provisioning.yml</code><br>
<code class="language-plaintext highlighter-rouge">12c_settings_remote_execution.yml</code><br>
<code class="language-plaintext highlighter-rouge">12d_settings_rh_cloud.yml</code><br>
<code class="language-plaintext highlighter-rouge">12e_settings_general.yml</code><br>
<code class="language-plaintext highlighter-rouge">12f_settings_notifications.yml</code><br>
<code class="language-plaintext highlighter-rouge">12g_merge_settings.yml</code>
</td>
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      <td style="text-align: left" rowspan="2">2
<br>
</td>
      <td style="text-align: left" rowspan="2">
<code class="language-plaintext highlighter-rouge">12a_settings_template_sync.yml</code>
<br>
<code class="language-plaintext highlighter-rouge">group_vars/all/github.yml</code>
</td>
    </tr>
    <tr>
      
      
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">14_satellite_settings.yml</code></td>
    </tr>
    <tr>
      <td style="text-align: left">2</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">15_satellite_template_sync.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-11">
  
  
    Procedure <a href="#procedure-11">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Satellite settings in our variables files:
    <ol>
      <li>
<strong>Tab Template Sync</strong>: Variables file: <code class="language-plaintext highlighter-rouge">12a_settings_template_sync.yml</code>:
 <script src="https://gist.github.com/bf5474d6cd2b41fcf237a515bc92a829.js"> </script>
</li>
      <li>
<strong>Tab Provisioning</strong>: Variables file: <code class="language-plaintext highlighter-rouge">12b_settings_provisioning.yml</code>:
 <script src="https://gist.github.com/cb31468e436df3b8ce344d7c5376baf3.js"> </script>
</li>
      <li>
<strong>Tab Remote Execution:</strong> Variables file: <code class="language-plaintext highlighter-rouge">12c_settings_remote_execution.yml</code>:
 <script src="https://gist.github.com/fe1d73bc8c895a7517370f403f4346d1.js"> </script>
</li>
      <li>
<strong>Tab RH Cloud:</strong> Variables file: <code class="language-plaintext highlighter-rouge">12d_settings_rh_cloud.yml</code>:
 <script src="https://gist.github.com/4b56a2e775b67c6d442ffc719b4b96d1.js"> </script>
</li>
      <li>
<strong>Tab General</strong>: Variables file: <code class="language-plaintext highlighter-rouge">12e_settings_general.yml</code>
 <script src="https://gist.github.com/0b57b779e5a944a77fee3ab0ebaa02a7.js"> </script>
</li>
      <li>
<strong>Tab Notifications</strong>: Variables file: <code class="language-plaintext highlighter-rouge">12f_settings_notifications.yml</code>
 <script src="https://gist.github.com/7842c40f0833abb64465061daeafa332.js"> </script>
</li>
      <li>All settings are merged into one variable (<code class="language-plaintext highlighter-rouge">satellite_settings</code>) which is the variable that is used by the role <code class="language-plaintext highlighter-rouge">redhat.satellite.settings</code> in the file <code class="language-plaintext highlighter-rouge">12g_merge_settings.yml</code>:
 <script src="https://gist.github.com/c9fd9deb61e6d39749ec9ef02073bf26.js"> </script>
</li>
    </ol>
  </li>
  <li>Run the playbook to apply the settings:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 14_satellite_settings.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
  <li>
    <p>Create a
<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#fine-grained-personal-access-tokens">(Fine Grained) Personal Access Token</a>
in GitHub with the following permissions (at least):</p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">Administration: Read and Write</code> (to deploy the SSH key from the Foreman user that performs the Template Synchronization)</li>
      <li><code class="language-plaintext highlighter-rouge">Contents: Read-only</code></li>
      <li><code class="language-plaintext highlighter-rouge">Metadata: Read-only</code></li>
    </ul>

    <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> Of course, you can deploy the SSH key manually and modify the playbook that configures the Template Sync (<code class="language-plaintext highlighter-rouge">15_satellite_template_sync.yml</code>) to not deploy the
 SSH key to GitHub if you are uncomfortable with creating a GitHub Access Token that has the <em>Administration</em> option set</p>
  </li>
  <li>Define the GitHub settings for the Template Sync in <code class="language-plaintext highlighter-rouge">group_vars/all/github.yml</code>
 <script src="https://gist.github.com/21475840ab5b6a90b263a87d9ee6bf70.js"> </script>
</li>
  <li>Run the playbook to configure the Template Sync and synchronize the Templates:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 15_satellite_template_sync.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-operating-systems">
  
  
    Create Operating Systems <a href="#create-operating-systems">#</a>
  
  
</h2>
    

<p>Since the Templates are now imported, we can start creating the Operating Systems and assign the imported Templates to them.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-13">
  
  
    Documentation <a href="#documentation-13">#</a>
  
  
</h3>
    
<!-- markdownlint-disable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/operatingsystems/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.operatingsystems</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/provisioning_hosts/configuring_provisioning_resources_provisioning#creating-operating-systems_provisioning">Creating Operating Systems</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-13">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-13">#</a>
  
  
</h3>
    
<!-- markdownlint-disable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:13" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.operatingsystems</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/13_operating_systems.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">16_satellite_operating_systems.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-12">
  
  
    Procedure <a href="#procedure-12">#</a>
  
  
</h3>
    
<!-- markdownlint-disable MD024 -->

<ol>
  <li>Define the Operating Systems in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/13_operating_systems.yml</code>:
 <script src="https://gist.github.com/031b18a1b51d901f088e88d8f779dc26.js"> </script>
</li>
  <li>Run the playbook to create and configure the Operating Systems:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 16_satellite_operating_systems.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-activation-keys">
  
  
    Create Activation Keys <a href="#create-activation-keys">#</a>
  
  
</h2>
    

<p>Creating Activation Keys is now possible, as we can refer to the Operating Systems that we created in the prior chapter.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-14">
  
  
    Documentation <a href="#documentation-14">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/activation_keys/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.activation_keys</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_content/managing_activation_keys_content-management">Managing Activation Keys</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-14">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-14">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:14" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.activation_keys</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/14_activation_keys.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">17_satellite_activation_keys.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-13">
  
  
    Procedure <a href="#procedure-13">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Activation Keys in <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/14_activation_keys.yml</code>
 <script src="https://gist.github.com/585614ff9d774fb064ce6b586f48efc8.js"> </script>
</li>
  <li>Run the playbook to create the Activation Keys:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 17_satellite_activation_keys.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-host-groups">
  
  
    Create Host Groups <a href="#create-host-groups">#</a>
  
  
</h2>
    

<p>Almost done! <img class="emoji" title=":sunglasses:" alt=":sunglasses:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png" height="20" width="20"></p>

<p>As our second to last step, we are going to create the Host Groups. Since I have
applied <a href="https://blog.scheib.me/2023/05/30/redhat-satellite-concept.html#host-groups-hg">my Satellite 6 concept for Host Groups</a>, I have split the Host Groups into
multiple files.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-15">
  
  
    Documentation <a href="#documentation-15">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/role/hostgroups/">Role <code class="language-plaintext highlighter-rouge">redhat.satellite.hostgroups</code></a></li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_satellite/6.14/html/managing_hosts/administering_hosts_managing-hosts#Creating_a_Host_Group_managing-hosts">Creating a Host Group</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-15">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-15">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:15" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">redhat.satellite.hostgroups</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left" rowspan="4">1
<br><br><br>
</td>
      <td style="text-align: left" rowspan="4">
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15a_host_groups_base.yml</code>
<br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15b_host_groups_services.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15c_host_groups_lifecycle_environments.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15d_host_groups_merged.yml</code>
</td>
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">18_satellite_host_groups.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-14">
  
  
    Procedure <a href="#procedure-14">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Host Groups
    <ol>
      <li>
<strong>Base</strong> and <strong>Operating System level Host Groups</strong>: <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15a_host_groups_base.yml</code>
 <script src="https://gist.github.com/c0ca37c45ec9ca780b2f7eff17fef984.js"> </script>
</li>
      <li>
<strong>Service level Host Groups</strong>: <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15b_host_groups_services.yml</code>
 <script src="https://gist.github.com/d06b236f5f5ff5dc15abbe54d6174ec1.js"> </script>
</li>
      <li>
<strong>Lifecycle Environment level Host Groups</strong>: <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15c_host_groups_lifecycle_environments.yml</code>
 <script src="https://gist.github.com/46776747718e35681b94681f68bfdfe9.js"> </script>
</li>
      <li>Finally, merge all Host Groups into the required variable <code class="language-plaintext highlighter-rouge">satellite_hostgroups</code> for the role <code class="language-plaintext highlighter-rouge">redhat.satellite.hostgroups</code>; That is done in the
file <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/15d_host_groups_merged.yml</code>
 <script src="https://gist.github.com/9dd2cd08399d49dad14a3637de88f935.js"> </script>
</li>
    </ol>
  </li>
  <li>Run the playbook to create the Host Groups:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 18_satellite_host_groups.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="create-global-parameters">
  
  
    Create Global Parameters <a href="#create-global-parameters">#</a>
  
  
</h2>
    

<p>Now on the the Global Parameters. I will define some Global Parameters that are specific to my use case, which
<a href="https://github.com/sscheib/satellite_templates">my Provisioning Templates</a> make use of as well as override some default Parameters. My parameters are denoted with a
prefixed <code class="language-plaintext highlighter-rouge">p-</code>. All Parameters which do not have that prefix are Parameters that are present by default.</p>

<p>Once again, I split up my variables into separate files to not have a big clunky file that is unmaintainable. <img class="emoji" title=":grin:" alt=":grin:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png" height="20" width="20"></p>

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> Unfortunately, there is no role available that creates Global Parameters, but there is a module available which we can use:
<code class="language-plaintext highlighter-rouge">redhat.satellite.global_parameter</code>.</p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-16">
  
  
    Documentation <a href="#documentation-16">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/module/global_parameter/">Module <code class="language-plaintext highlighter-rouge">redhat.satellite.global_parameter</code></a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-16">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-16">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:16" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">N/A</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left" rowspan="4">1
<br><br><br>
</td>
      <td style="text-align: left" rowspan="4">
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16a_global_parameters_ansible_provisioning.yml</code>
<br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16b_global_parameters_remote_execution.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16c_global_parameters_general.yml</code><br>
<code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16d_merge_global_parameters.yml</code>
</td>
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
    <tr>
      
      
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">19_satellite_global_parameters.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-15">
  
  
    Procedure <a href="#procedure-15">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the Global Parameters
    <ol>
      <li>Global Parameters for Ansible post provisioning: <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16a_global_parameters_ansible_provisioning.yml</code>
 <script src="https://gist.github.com/ccacbc6d834959ab0a18898af41c3546.js"> </script>
</li>
      <li>Global Parameters for Remote Execution: <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16b_global_parameters_remote_execution.yml</code>
 <script src="https://gist.github.com/9a54f56b9a66f99473d49fe61d16e322.js"> </script>
</li>
      <li>General Global Parameters: <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16c_global_parameters_general.yml</code>
 <script src="https://gist.github.com/581f59a607c385a52e7750f93261a379.js"> </script>
</li>
      <li>Merge all Global Parameters: <code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/16d_merge_global_parameters.yml</code>
 <script src="https://gist.github.com/594c9981cfde05e3db15e24bd3cb28fc.js"> </script>
</li>
    </ol>
  </li>
  <li>Run the playbook to create the Global Parameters:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 19_satellite_global_parameters.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-disable MD014 --></p>
  </li>
</ol>
<h2 id="optional-enable-and-import-openscap-content">
  
  
    <em>Optional:</em> Enable and import OpenSCAP content <a href="#optional-enable-and-import-openscap-content">#</a>
  
  
</h2>
    

<p>If you are looking to ensure compliance on your hosts using <a href="https://www.open-scap.org/">OpenSCAP</a>, this chapter will be for you. Here is the thing:
Satellite comes already preloaded with some OpenSCAP content. I have written a playbook that will accommodate the two scenarios. Whether you are looking to
only enable the default OpenSCAP content or if you want to import custom OpenSCAP content, you can use this playbook.</p>

<p>Why writing a custom playbook and not make use of the module
<a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/module/scap_content/"><code class="language-plaintext highlighter-rouge">satellite.scap_content</code></a>? First of all,
I haven’t been able to make the module work with <code class="language-plaintext highlighter-rouge">validate_certs: true</code>. I have created a <a href="https://github.com/theforeman/foreman-ansible-modules/issues/1611">GitHub issue</a>
that hasn’t been resolved yet (due to the lack of interaction on my end). Secondly, I simply haven’t come around to build a role of it. I probably will eventually
do - but then again it makes no sense, as there is already a module that’s supposed to work, which would make the role practically obsolete.</p>

<p>Nevertheless, for the time being you can use the playbook <img class="emoji" title=":sunglasses:" alt=":sunglasses:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png" height="20" width="20"></p>

<!-- markdownlint-disable MD024 -->
<h3 id="documentation-17">
  
  
    Documentation <a href="#documentation-17">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ul>
  <li><a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite/content/module/scap_content/">Module <code class="language-plaintext highlighter-rouge">satellite.scap_content</code></a></li>
  <li><a href="https://www.open-scap.org/">OpenSCAP</a></li>
</ul>

<!-- markdownlint-disable MD024 -->
<h3 id="roles-variables-files-and-playbooks-17">
  
  
    Roles, variables files and playbooks <a href="#roles-variables-files-and-playbooks-17">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> The tables below can be mapped through the numbering column (<code class="language-plaintext highlighter-rouge">#</code>).<sup id="fnref:column_explanation:17" role="doc-noteref"><a href="#fn:column_explanation" class="footnote" rel="footnote">1</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Role/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">N/A</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Variable definition file/s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">host_vars/&lt;hostname&gt;/17_openscap.yml</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">#</th>
      <th style="text-align: left">Playbook/s used</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">20_satellite_openscap.yml</code></td>
    </tr>
  </tbody>
</table>

<!-- markdownlint-disable MD024 -->
<h3 id="procedure-16">
  
  
    Procedure <a href="#procedure-16">#</a>
  
  
</h3>
    
<!-- markdownlint-enable MD024 -->

<ol>
  <li>Define the variables for OpenSCAP
 <script src="https://gist.github.com/a222ecc8c0afaaf5d8dc9fcdbc3c7fe8.js"> </script>
</li>
  <li>Run the playbook to create the OpenSCAP content, enable the default OpenSCAP content and enable the Foreman OpenSCAP role:
 <!-- markdownlint-disable MD014 -->
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ansible-playbook <span class="nt">-i</span> inventory 20_satellite_openscap.yml <span class="nt">--vault-pass-file</span> .vault.pass
</code></pre></div>    </div>
    <p><!-- markdownlint-enable MD014 --></p>
  </li>
</ol>
<h2 id="closing-thoughts">
  
  
    Closing thoughts <a href="#closing-thoughts">#</a>
  
  
</h2>
    

<p>This concludes this blog post. There are way more things you can do with
<a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/satellite">Red Hat’s Certified Ansible Collection for Red Hat Satellite</a> and I highly encourage you
to explore the possibilities. I haven’t touch on things as Compute Resources or Host Collections and many more things you could theoretically make use of with your specific
use case.</p>

<p>There are still a few things left to do! I either update this blog post or might create new blog posts about the topics. The topics that I’d like to touch in the future are:</p>

<ul>
  <li>Adding Capsules</li>
  <li>Create Hosts in Satellite</li>
  <li>Create and assign OpenSCAP policies, as well as OpenSCAP tailoring files</li>
  <li>Figure out a way to make it easier to find out the Product and Repository labels</li>
  <li>
<em>Maybe</em> convert the OpenSCAP playbook into a role</li>
</ul>

<p><em>BUT</em> don’t hold your breath on those topics. I have other blogs that I’d like to write, but I’ll surely revisit this blog in <strong>the future</strong>.</p>

<p>I hope this blog post was helpful to some of you <img class="emoji" title=":sunglasses:" alt=":sunglasses:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png" height="20" width="20"></p>

<p>.. until next time,</p>

<p>Steffen</p>
<h2 id="change-log">
  
  
    Change log <a href="#change-log">#</a>
  
  
</h2>
    
<h3 id="2025-01-23">
  
  
    2025-01-23 <a href="#2025-01-23">#</a>
  
  
</h3>
    

<ul>
  <li>Fixing dead Kickstart reference documentation</li>
</ul>
<h3 id="2024-03-17">
  
  
    2024-03-17 <a href="#2024-03-17">#</a>
  
  
</h3>
    

<ul>
  <li>Spelling fixes (thanks <a href="https://github.com/ls7ls7">@ls7ls7</a>!)</li>
  <li>Updating documentation to point to the latest available (thanks <a href="https://github.com/ls7ls7">@ls7ls7</a>!)</li>
</ul>
<h3 id="2024-03-11">
  
  
    2024-03-11 <a href="#2024-03-11">#</a>
  
  
</h3>
    

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">markdownlint</code> fixes</li>
  <li>Spelling fixes</li>
</ul>
<h3 id="2024-03-09">
  
  
    2024-03-09 <a href="#2024-03-09">#</a>
  
  
</h3>
    

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">markdownlint</code> fixes</li>
  <li>Typo fixes</li>
  <li>Adding a note that RHEL 8.8 and RHEL 8.9 with Ansible Core 2.15.4 has been tested</li>
  <li>Adding a note that this has been tested on Satellite 6.13 and Satellite 6.14</li>
</ul>
<h2 id="footnotes">
  
  
    Footnotes <a href="#footnotes">#</a>
  
  
</h2>
    

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:column_explanation" role="doc-endnote">
      <p>All tables in the <strong>Roles, variables files and playbooks</strong> section are set up in a way that helps to easily identify which role uses which variable
                   files and which playbooks. For example, the role that is used in <code class="language-plaintext highlighter-rouge">#1</code> in the first table (<code class="language-plaintext highlighter-rouge">Role/s used</code>), makes use of the variables that
                   are defined in table <code class="language-plaintext highlighter-rouge">Variable definition file/s</code> in column <code class="language-plaintext highlighter-rouge">#1</code> and is executed with the playbook that is defined in the table <code class="language-plaintext highlighter-rouge">Playbook/s used</code>
                   in column <code class="language-plaintext highlighter-rouge">#1</code>. <a href="#fnref:column_explanation" class="reversefootnote" role="doc-backlink">↩</a> <a href="#fnref:column_explanation:1" class="reversefootnote" role="doc-backlink">↩<sup>2</sup></a> <a href="#fnref:column_explanation:2" class="reversefootnote" role="doc-backlink">↩<sup>3</sup></a> <a href="#fnref:column_explanation:3" class="reversefootnote" role="doc-backlink">↩<sup>4</sup></a> <a href="#fnref:column_explanation:4" class="reversefootnote" role="doc-backlink">↩<sup>5</sup></a> <a href="#fnref:column_explanation:5" class="reversefootnote" role="doc-backlink">↩<sup>6</sup></a> <a href="#fnref:column_explanation:6" class="reversefootnote" role="doc-backlink">↩<sup>7</sup></a> <a href="#fnref:column_explanation:7" class="reversefootnote" role="doc-backlink">↩<sup>8</sup></a> <a href="#fnref:column_explanation:8" class="reversefootnote" role="doc-backlink">↩<sup>9</sup></a> <a href="#fnref:column_explanation:9" class="reversefootnote" role="doc-backlink">↩<sup>10</sup></a> <a href="#fnref:column_explanation:10" class="reversefootnote" role="doc-backlink">↩<sup>11</sup></a> <a href="#fnref:column_explanation:11" class="reversefootnote" role="doc-backlink">↩<sup>12</sup></a> <a href="#fnref:column_explanation:12" class="reversefootnote" role="doc-backlink">↩<sup>13</sup></a> <a href="#fnref:column_explanation:13" class="reversefootnote" role="doc-backlink">↩<sup>14</sup></a> <a href="#fnref:column_explanation:14" class="reversefootnote" role="doc-backlink">↩<sup>15</sup></a> <a href="#fnref:column_explanation:15" class="reversefootnote" role="doc-backlink">↩<sup>16</sup></a> <a href="#fnref:column_explanation:16" class="reversefootnote" role="doc-backlink">↩<sup>17</sup></a> <a href="#fnref:column_explanation:17" class="reversefootnote" role="doc-backlink">↩<sup>18</sup></a></p>
    </li>
    <li id="fn:key_usage" role="doc-endnote">
      <p><a href="https://access.redhat.com/solutions/6977733">“ERR_SSL_KEY_USAGE_INCOMPATIBLE” while accessing Red Hat Satellite WebUI after configure custom SSL certificates</a> <a href="#fnref:key_usage" class="reversefootnote" role="doc-backlink">↩</a></p>
    </li>
  </ol>
</div>

  </div>

  <script src="https://utteranc.es/client.js" repo="sscheib/sscheib.github.io-comments" issue-term="title" label="comment" theme="github-light" crossorigin="anonymous" async>
  </script>

  <a class="u-url" href="/2023/07/09/automating-satellite.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://blog.scheib.me/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          
        </ul>
      </div>
      <div class="footer-col">
        <p>This my personal blog, where I post about things that I do and find interesting. All posts and thoughts on this blog are solely my opinion and are not related to my employer.</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list"><li><a href="https://github.com/sscheib"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">sscheib</span></a></li></ul>
</div>
    <div class="datenschutzerklaerung">
    <a style="font-size:10px" href="https://blog.scheib.me/datenschutzerklaerung.html">Datenschutzerklärung</a> <a style="font-size:10px" href="https://blog.scheib.me/impressum.html">Impressum</a>
    </div>

  </div>
</footer>
</body>

</html>
